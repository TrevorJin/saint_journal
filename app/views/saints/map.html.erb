<div id="page-wrapper">
  <%= render 'layouts/alerts' %>
  <div class="row">
    <div class="col-lg-12">
      <h1 class="page-header">
          Saint Map
      </h1>
      <!-- /.page-header -->
    </div>
    <!-- /.col-lg-12 -->
  </div>
  <!-- /.row -->
  <div id='map' style='width: 1000px; height: 500px;'></div>
  <script>
    mapboxgl.accessToken = 'pk.eyJ1Ijoic2FpbnRqb3VybmFsIiwiYSI6ImNpeTJqbzZzNzAwM2QycWxhenpubDJ6eTMifQ.z-C8BCVYHRlcct2jAYk9aA';
    var map = new mapboxgl.Map({
      container: 'map', // container id
      style: 'mapbox://styles/mapbox/streets-v9', //stylesheet location
      center: [12.496, 41.9028], // starting position
      zoom: 2 // starting zoom
    });
    map.featureLayer.on("ready", function(e) {
      getSaints(map);
    });
    function getSaints(map) {
      $.ajax({
        dataType: 'text',
        url: '/map.json',
        success: function(data) {
          var geojson;
          geojson = $.parseJSON(data);
          return map.featureLayer.setGeoJSON(geojson);
        }
      });
    };
  </script>
</div>
<!-- /.page-wrapper -->
